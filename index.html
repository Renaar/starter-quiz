<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quel starter as-tu obtenu ?</title>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --card-bg: rgba(255, 255, 255, 0.95);
      --fire: #ff6b6b;
      --water: #4ecdc4;
      --grass: #45b7d1;
      --electric: #f9ca24;
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      --border-radius: 16px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Lexend', sans-serif;
      background: var(--primary-bg);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .container {
      max-width: 600px;
      width: 100%;
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      padding: 2rem;
      animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 1rem;
      font-weight: 600;
      font-size: 2rem;
    }

    .name-form {
      text-align: center;
      padding: 2rem;
      background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(240,248,255,0.9));
      border-radius: var(--border-radius);
      margin-bottom: 2rem;
      box-shadow: var(--shadow);
    }

    .name-form h2 {
      color: #333;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }

    .name-form input {
      width: 100%;
      max-width: 300px;
      padding: 1rem;
      border: 2px solid #e0e0e0;
      border-radius: var(--border-radius);
      font-size: 1.1rem;
      font-family: inherit;
      margin-bottom: 1rem;
      transition: all 0.3s ease;
    }

    .name-form input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
    }

    .start-btn {
      padding: 1rem 2rem;
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      font-size: 1.1rem;
      font-family: inherit;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: var(--shadow);
      margin-top: 0.5rem;
    }

    .start-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2);
    }

    .start-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .quiz-container {
      display: none;
    }
      text-align: center;
      padding: 2rem;
      background: linear-gradient(135deg, rgba(255,107,107,0.2), rgba(78,205,196,0.2), rgba(69,183,209,0.2), rgba(249,202,36,0.2));
      border-radius: var(--border-radius);
      margin: 1rem auto 2rem;
      box-shadow: var(--shadow);
    }

    .pokemon-icons {
      font-size: 3rem;
      margin-bottom: 0.5rem;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    .header-placeholder p {
      color: #555;
      font-weight: 600;
      margin: 0;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      margin-bottom: 2rem;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--fire), var(--water), var(--grass), var(--electric));
      transition: width 0.3s ease;
      border-radius: 4px;
    }

    .question-container {
      animation: slideIn 0.4s ease-out;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(30px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .question h2 {
      text-align: center;
      color: #444;
      margin-bottom: 1.5rem;
      font-weight: 400;
      font-size: 1.3rem;
    }

    .question-number {
      text-align: center;
      color: #666;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }

    .answers {
      display: grid;
      gap: 0.8rem;
    }

    .answer-btn {
      padding: 1rem;
      border: none;
      border-radius: var(--border-radius);
      background: linear-gradient(145deg, #f8f9fa, #e9ecef);
      color: #333;
      font-size: 1rem;
      font-family: inherit;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
    }

    .answer-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .answer-btn:active {
      transform: translateY(0);
    }

    .answer-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }

    .answer-btn:hover::before {
      left: 100%;
    }

    .result {
      text-align: center;
      animation: bounceIn 0.6s ease-out;
    }

    @keyframes bounceIn {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.1); opacity: 0.8; }
      100% { transform: scale(1); opacity: 1; }
    }

    .result h2 {
      color: #333;
      margin-bottom: 1rem;
      font-size: 2rem;
    }

    .starter-name {
      font-size: 2.5rem;
      font-weight: 600;
      margin: 1rem 0;
      background: linear-gradient(45deg, var(--fire), var(--electric));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .starter-image-container {
      margin: 1rem 0;
    }

    .starter-image {
      max-width: 200px;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      animation: float 3s ease-in-out infinite;
      image-rendering: auto;
      background: rgba(255,255,255,0.8);
      padding: 1rem;
    }

    .image-fallback {
      padding: 2rem;
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      animation: float 3s ease-in-out infinite;
    }

    .pokemon-sprite {
      font-size: 4rem;
      margin-bottom: 1rem;
    }

    .image-fallback p {
      font-size: 1.2rem;
      color: #555;
      margin: 0;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    .description {
      font-size: 1.2rem;
      color: #555;
      margin: 1rem 0;
      line-height: 1.6;
    }

    .element-badge {
      display: inline-block;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      color: white;
      font-weight: 600;
      margin: 0.5rem;
      box-shadow: var(--shadow);
    }

    .fire { background: var(--fire); }
    .water { background: var(--water); }
    .grass { background: var(--grass); }
    .electric { background: var(--electric); }

    .restart-btn {
      margin-top: 2rem;
      padding: 1rem 2rem;
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      font-size: 1.1rem;
      font-family: inherit;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: var(--shadow);
    }

    .restart-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2);
    }

    .scores-display {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin: 1rem 0;
    }

    .score-item {
      padding: 0.5rem;
      border-radius: 8px;
      text-align: center;
      color: white;
      font-weight: 600;
    }

    @media (max-width: 768px) {
      .container { padding: 1.5rem; }
      h1 { font-size: 1.5rem; }
      .question h2 { font-size: 1.1rem; }
      .starter-name { font-size: 2rem; }
      .scores-display { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸŽ® Quel starter as-tu obtenu ?</h1>
    
    <div id="name-form" class="name-form">
      <h2>ðŸ‘‹ Salut ! Comment tu t'appelles ?</h2>
      <input type="text" id="student-name" placeholder="Ton prÃ©nom..." maxlength="30">
      <button onclick="quiz.startQuiz()" class="start-btn">Commencer le quiz !</button>
    </div>
    
    <div class="quiz-container">
      <div class="header-placeholder">
        <div class="pokemon-icons">ðŸ”¥ðŸ’§ðŸŒ¿âš¡</div>
        <p>Starters PokÃ©mon</p>
      </div>
      
      <div class="progress-bar">
        <div class="progress-fill" id="progress"></div>
      </div>
      
      <div id="quiz"></div>
      <div id="result"></div>
    </div>
  </div>

  <script>
    class PokemonQuiz {
      constructor() {
        this.currentQuestion = 0;
        this.scores = { fire: 0, water: 0, grass: 0, electric: 0 };
        this.studentName = '';
        this.answers = [];
        this.quizElement = document.getElementById('quiz');
        this.resultElement = document.getElementById('result');
        this.progressElement = document.getElementById('progress');
        this.nameForm = document.getElementById('name-form');
        this.quizContainer = document.querySelector('.quiz-container');
        
        this.questions = [
          {
            text: "Tu es dans une forÃªt mystÃ©rieuse. Que fais-tu en premier ?",
            answers: [
              { text: "ðŸ”¥ J'escalade les rochers pour avoir une vue d'ensemble", type: "fire" },
              { text: "ðŸŒ¿ J'observe discrÃ¨tement les crÃ©atures qui m'entourent", type: "grass" },
              { text: "ðŸ’§ Je cherche un point d'eau pour me repÃ©rer", type: "water" },
              { text: "âš¡ Je propose une exploration en groupe", type: "electric" }
            ]
          },
          {
            text: "En classe, tes amis te connaissent surtout pour...",
            answers: [
              { text: "ðŸ”¥ Ta dÃ©termination Ã  toujours rÃ©ussir", type: "fire" },
              { text: "âš¡ Ton humour qui dÃ©tend l'atmosphÃ¨re", type: "electric" },
              { text: "ðŸ’§ Ta logique implacable", type: "water" },
              { text: "ðŸŒ¿ Ta crÃ©ativitÃ© dÃ©bordante", type: "grass" }
            ]
          },
          {
            text: "Un ami traverse une pÃ©riode difficile. Tu...",
            answers: [
              { text: "ðŸ”¥ Cherches immÃ©diatement une solution concrÃ¨te", type: "fire" },
              { text: "ðŸ’§ Restes Ã  ses cÃ´tÃ©s pour l'Ã©couter patiemment", type: "water" },
              { text: "âš¡ Tries de le faire rire pour lui changer les idÃ©es", type: "electric" },
              { text: "ðŸŒ¿ Lui Ã©cris un petit mot touchant", type: "grass" }
            ]
          },
          {
            text: "Tu dois crÃ©er ton jeu vidÃ©o idÃ©al. Tu choisirais...",
            answers: [
              { text: "ðŸ”¥ Un jeu d'action intense avec des combats Ã©piques", type: "fire" },
              { text: "ðŸ’§ Un puzzle game avec une histoire complexe", type: "water" },
              { text: "ðŸŒ¿ Un monde ouvert paisible Ã  explorer", type: "grass" },
              { text: "âš¡ Un party game multijoueur dÃ©lirant", type: "electric" }
            ]
          },
          {
            text: "Lors d'un projet de groupe, tu es naturellement...",
            answers: [
              { text: "ðŸ”¥ Le leader qui motive et dirige", type: "fire" },
              { text: "ðŸ’§ L'organisateur qui structure les idÃ©es", type: "water" },
              { text: "ðŸŒ¿ L'artiste qui s'occupe du visuel", type: "grass" },
              { text: "âš¡ L'orateur qui prÃ©sente avec brio", type: "electric" }
            ]
          },
          {
            text: "Si tu pouvais adopter un compagnon, ce serait...",
            answers: [
              { text: "ðŸ”¥ Un fÃ©lin sauvage et indÃ©pendant", type: "fire" },
              { text: "ðŸ’§ Un animal aquatique Ã©lÃ©gant", type: "water" },
              { text: "ðŸŒ¿ Une crÃ©ature de la forÃªt sage et discrÃ¨te", type: "grass" },
              { text: "âš¡ Un animal social et Ã©nergique", type: "electric" }
            ]
          },
          {
            text: "Dans un jeu, ce qui te motive le plus c'est...",
            answers: [
              { text: "ðŸ”¥ Gagner rapidement et efficacement", type: "fire" },
              { text: "ðŸ’§ RÃ©soudre des Ã©nigmes complexes", type: "water" },
              { text: "ðŸŒ¿ Personnaliser et dÃ©corer mon environnement", type: "grass" },
              { text: "âš¡ M'amuser et crÃ©er des moments mÃ©morables", type: "electric" }
            ]
          },
          {
            text: "Face Ã  un dÃ©fi inconnu, ta premiÃ¨re rÃ©action est...",
            answers: [
              { text: "ðŸ”¥ J'accepte immÃ©diatement, sans hÃ©siter", type: "fire" },
              { text: "ðŸ’§ J'analyse les pour et les contre", type: "water" },
              { text: "ðŸŒ¿ Je cherche une approche originale", type: "grass" },
              { text: "âš¡ Je transforme Ã§a en dÃ©fi amusant", type: "electric" }
            ]
          },
          {
            text: "Ton week-end de rÃªve ressemblerait Ã ...",
            answers: [
              { text: "ðŸ”¥ Une aventure sportive ou un road trip", type: "fire" },
              { text: "ðŸ’§ Lire un bon livre ou regarder un documentaire", type: "water" },
              { text: "ðŸŒ¿ Peindre, jardiner ou crÃ©er quelque chose", type: "grass" },
              { text: "âš¡ Organiser une fÃªte avec tous mes amis", type: "electric" }
            ]
          },
          {
            text: "L'application que tu utilises le plus ressemble Ã ...",
            answers: [
              { text: "ðŸ”¥ YouTube pour apprendre de nouvelles compÃ©tences", type: "fire" },
              { text: "ðŸ’§ Une app Ã©ducative ou de rÃ©fÃ©rence", type: "water" },
              { text: "ðŸŒ¿ Une app crÃ©ative comme Pinterest ou Procreate", type: "grass" },
              { text: "âš¡ Les rÃ©seaux sociaux pour rester connectÃ©", type: "electric" }
            ]
          }
        ];

        this.starters = {
          fire: [
            { name: "SalamÃ¨che", description: "Courageux et dÃ©terminÃ©, il n'abandonne jamais", emoji: "ðŸ”¥" },
            { name: "HÃ©ricendre", description: "Discret mais explosif quand il le faut", emoji: "ðŸ”¥" },
            { name: "Poussifeu", description: "Petit mais plein d'Ã©nergie et de dÃ©termination", emoji: "ðŸ”¥" },
            { name: "Ouisticram", description: "Agile et malin, toujours prÃªt Ã  relever un dÃ©fi", emoji: "ðŸ”¥" },
            { name: "Flamiaou", description: "IndÃ©pendant et charismatique", emoji: "ðŸ”¥" }
          ],
          water: [
            { name: "Carapuce", description: "StratÃ¨ge naturel avec un grand cÅ“ur", emoji: "ðŸ’§" },
            { name: "Kaiminus", description: "Ã‰nergique et loyal, malgrÃ© sa maladresse", emoji: "ðŸ’§" },
            { name: "Gobou", description: "Paisible mais incroyablement rÃ©sistant", emoji: "ðŸ’§" },
            { name: "Tiplouf", description: "Fier et dÃ©terminÃ©, ne recule devant rien", emoji: "ðŸ’§" },
            { name: "Moustillon", description: "MÃ©thodique et prÃ©cis dans tout ce qu'il fait", emoji: "ðŸ’§" }
          ],
          grass: [
            { name: "Bulbizarre", description: "Ã‰quilibrÃ© et sage, grandit avec patience", emoji: "ðŸŒ¿" },
            { name: "Germignon", description: "Doux et attentionnÃ©, toujours lÃ  pour les autres", emoji: "ðŸŒ¿" },
            { name: "Arcko", description: "Calme et observateur, agit avec prÃ©cision", emoji: "ðŸŒ¿" },
            { name: "Tortipouss", description: "Patient et persÃ©vÃ©rant, rien ne l'arrÃªte", emoji: "ðŸŒ¿" },
            { name: "VipÃ©lierre", description: "Ã‰lÃ©gant et rÃ©flÃ©chi, garde son sang-froid", emoji: "ðŸŒ¿" }
          ],
          electric: [
            { name: "Pikachu", description: "Ã‰nergique et fidÃ¨le, le compagnon idÃ©al", emoji: "âš¡" },
            { name: "Ã‰voli", description: "Polyvalent et attachant, plein de potentiel", emoji: "âš¡" },
            { name: "Riolu", description: "DÃ©terminÃ© et loyal, apprend trÃ¨s vite", emoji: "âš¡" },
            { name: "Ã‰lekid", description: "Curieux et Ã©lectrisant, toujours en mouvement", emoji: "âš¡" },
            { name: "Pachirisu", description: "EspiÃ¨gle et sociable, apporte la joie partout", emoji: "âš¡" }
          ]
        };

        this.imageUrls = {
          "SalamÃ¨che": "https://www.pokepedia.fr/images/thumb/8/89/Salam%C3%A8che-RFVF.png/530px-Salam%C3%A8che-RFVF.png",
          "HÃ©ricendre": "https://www.pokepedia.fr/images/thumb/a/ac/H%C3%A9ricendre-HGSS.png/790px-H%C3%A9ricendre-HGSS.png",
          "Poussifeu": "https://www.pokepedia.fr/images/thumb/1/11/Poussifeu-RS.png/362px-Poussifeu-RS.png",
          "Ouisticram": "https://www.pokepedia.fr/images/thumb/9/93/Ouisticram-DP.png/357px-Ouisticram-DP.png",
          "Flamiaou": "https://www.pokepedia.fr/images/7/79/Flamiaou_%28boule_de_feu%29-SL.png",
          "Carapuce": "https://www.pokepedia.fr/images/thumb/c/cc/Carapuce-RFVF.png/580px-Carapuce-RFVF.png",
          "Kaiminus": "https://www.pokepedia.fr/images/thumb/0/00/Kaiminus-LPZA.png/382px-Kaiminus-LPZA.png",
          "Gobou": "https://www.pokepedia.fr/images/thumb/f/f3/Gobou-RS.png/550px-Gobou-RS.png",
          "Tiplouf": "https://www.pokepedia.fr/images/thumb/e/ed/Tiplouf-DP.png/398px-Tiplouf-DP.png",
          "Moustillon": "https://www.pokepedia.fr/images/thumb/8/81/Moustillon-NB.png/463px-Moustillon-NB.png",
          "Bulbizarre": "https://www.pokepedia.fr/images/thumb/e/ef/Bulbizarre-RFVF.png/644px-Bulbizarre-RFVF.png",
          "Germignon": "https://www.pokepedia.fr/images/thumb/9/9d/Germignon-LPZA.png/487px-Germignon-LPZA.png",
          "Arcko": "https://www.pokepedia.fr/images/thumb/e/ef/Arcko-RS.png/570px-Arcko-RS.png",
          "Tortipouss": "https://www.pokepedia.fr/images/thumb/b/ba/Tortipouss-DP.png/639px-Tortipouss-DP.png",
          "VipÃ©lierre": "https://www.pokepedia.fr/images/thumb/8/8d/Vip%C3%A9lierre-NB.png/523px-Vip%C3%A9lierre-NB.png",
          "Pikachu": "https://www.pokepedia.fr/images/thumb/a/a7/Pikachu_%28Casquette_d%27Alola%29-SL.png/308px-Pikachu_%28Casquette_d%27Alola%29-SL.png",
          "Ã‰voli": "https://www.pokepedia.fr/images/thumb/8/8b/%C3%89voli-RFVF.png/487px-%C3%89voli-RFVF.png",
          "Riolu": "https://www.pokepedia.fr/images/thumb/7/7b/Riolu-DP.png/558px-Riolu-DP.png",
          "Ã‰lekid": "https://www.pokepedia.fr/images/thumb/e/e4/%C3%89lekid-DP.png/590px-%C3%89lekid-DP.png",
          "Pachirisu": "https://www.pokepedia.fr/images/thumb/4/41/Pachirisu-DP.png/663px-Pachirisu-DP.png"
        };

        this.init();
      }

      init() {
        // Le quiz commence par la saisie du nom
      }

      startQuiz() {
        const nameInput = document.getElementById('student-name');
        const name = nameInput.value.trim();
        
        if (name.length < 2) {
          nameInput.style.borderColor = '#ff6b6b';
          nameInput.placeholder = 'Entre ton prÃ©nom s\'il te plaÃ®t !';
          return;
        }
        
        this.studentName = name;
        this.nameForm.style.display = 'none';
        this.quizContainer.style.display = 'block';
        this.showQuestion();
      }

      updateProgress() {
        const percentage = (this.currentQuestion / this.questions.length) * 100;
        this.progressElement.style.width = `${percentage}%`;
      }

      showQuestion() {
        if (this.currentQuestion >= this.questions.length) {
          return this.showResult();
        }

        this.updateProgress();
        const question = this.questions[this.currentQuestion];
        
        this.quizElement.innerHTML = `
          <div class="question-container">
            <div class="question-number">
              Question ${this.currentQuestion + 1} sur ${this.questions.length}
            </div>
            <div class="question">
              <h2>${question.text}</h2>
              <div class="answers">
                ${question.answers.map(answer => 
                  `<button class="answer-btn" onclick="quiz.answer('${answer.type}')">
                    ${answer.text}
                  </button>`
                ).join('')}
              </div>
            </div>
          </div>
        `;
      }

      answer(type) {
        const question = this.questions[this.currentQuestion];
        const selectedAnswer = question.answers.find(a => a.type === type);
        
        // Enregistrer la rÃ©ponse
        this.answers.push({
          question: question.text,
          answer: selectedAnswer.text,
          type: type
        });
        
        this.scores[type]++;
        this.currentQuestion++;
        setTimeout(() => this.showQuestion(), 200);
      }

      getWinningType() {
        return Object.entries(this.scores).reduce((a, b) => a[1] >= b[1] ? a : b)[0];
      }

      showResult() {
        this.updateProgress();
        const winningType = this.getWinningType();
        const possibleStarters = this.starters[winningType];
        const chosenStarter = possibleStarters[Math.floor(Math.random() * possibleStarters.length)];
        
        const elementClasses = { fire: 'fire', water: 'water', grass: 'grass', electric: 'electric' };
        const elementNames = { fire: 'Feu', water: 'Eau', grass: 'Plante', electric: 'Ã‰lectrique' };

        // Envoyer les rÃ©sultats
        this.sendResults(chosenStarter, winningType, elementNames[winningType]);

        this.quizElement.innerHTML = '';
        this.resultElement.innerHTML = `
          <div class="result">
            <h2>ðŸŽ‰ ${this.studentName}, ton starter est...</h2>
            <div class="starter-name">${chosenStarter.name}</div>
            <div class="starter-image-container">
              <img class="starter-image" src="${this.imageUrls[chosenStarter.name]}" 
                   alt="${chosenStarter.name}"
                   onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
              <div class="image-fallback" style="display:none;">
                <div class="pokemon-sprite">${chosenStarter.emoji}</div>
                <p>${chosenStarter.name}</p>
              </div>
            </div>
            <div class="element-badge ${elementClasses[winningType]}">
              ${chosenStarter.emoji} Type ${elementNames[winningType]}
            </div>
            <div class="description">${chosenStarter.description}</div>
            
            <div class="scores-display">
              ${Object.entries(this.scores).map(([type, score]) => 
                `<div class="score-item ${elementClasses[type]}">
                  ${elementNames[type]}: ${score}
                </div>`
              ).join('')}
            </div>
            
            <button class="restart-btn" onclick="quiz.restart()">
              ðŸ”„ Refaire le quiz
            </button>
          </div>
        `;
      }

      async sendResults(starter, winningType, elementName) {
        const resultData = {
          nom: this.studentName,
          starter: starter.name,
          type: elementName,
          scores_feu: this.scores.fire,
          scores_eau: this.scores.water,
          scores_plante: this.scores.grass,
          scores_electrique: this.scores.electric,
          date: new Date().toLocaleString('fr-FR'),
          reponses: this.answers.map(a => `${a.question}: ${a.answer}`).join(' | ')
        };

        // Sauvegarder les rÃ©sultats localement
        this.saveToLocalStorage(resultData);
        
        console.log('âœ… RÃ©sultats sauvegardÃ©s pour', this.studentName);
      }

      saveToLocalStorage(data) {
        let allResults = JSON.parse(localStorage.getItem('pokemonQuizResults') || '[]');
        allResults.push(data);
        localStorage.setItem('pokemonQuizResults', JSON.stringify(allResults));
        
        // Afficher un bouton de tÃ©lÃ©chargement si c'est le premier rÃ©sultat
        this.showDownloadButton();
      }

      showDownloadButton() {
        if (!document.getElementById('download-btn')) {
          const downloadBtn = document.createElement('button');
          downloadBtn.id = 'download-btn';
          downloadBtn.className = 'download-btn';
          downloadBtn.innerHTML = 'ðŸ“Š TÃ©lÃ©charger les rÃ©sultats (Enseignant)';
          downloadBtn.onclick = () => this.downloadResults();
          downloadBtn.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
          `;
          document.body.appendChild(downloadBtn);
        }
      }

      downloadResults() {
        const results = JSON.parse(localStorage.getItem('pokemonQuizResults') || '[]');
        
        if (results.length === 0) {
          alert('Aucun rÃ©sultat Ã  tÃ©lÃ©charger encore !');
          return;
        }

        // CrÃ©er le CSV
        const headers = ['Nom', 'Starter', 'Type', 'Score Feu', 'Score Eau', 'Score Plante', 'Score Ã‰lectrique', 'Date', 'RÃ©ponses dÃ©taillÃ©es'];
        const csvContent = [
          headers.join(','),
          ...results.map(row => [
            `"${row.nom}"`,
            `"${row.starter}"`, 
            `"${row.type}"`,
            row.scores_feu,
            row.scores_eau,
            row.scores_plante,
            row.scores_electrique,
            `"${row.date}"`,
            `"${row.reponses}"`
          ].join(','))
        ].join('\n');

        // TÃ©lÃ©charger le fichier
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');
        const url = URL.createObjectURL(blob);
        link.setAttribute('href', url);
        link.setAttribute('download', `resultats_pokemon_quiz_${new Date().toISOString().split('T')[0]}.csv`);
        link.style.visibility = 'hidden';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        alert(`âœ… ${results.length} rÃ©sultats tÃ©lÃ©chargÃ©s !`);
      }

      restart() {
        this.currentQuestion = 0;
        this.scores = { fire: 0, water: 0, grass: 0, electric: 0 };
        this.answers = [];
        this.resultElement.innerHTML = '';
        this.quizContainer.style.display = 'none';
        this.nameForm.style.display = 'block';
        document.getElementById('student-name').value = '';
      }
    }

    // Initialisation du quiz
    const quiz = new PokemonQuiz();
  </script>
</body>
</html>